!function(a){a.fn.tagInput=function(b){for(var c={tagKeys:["space","comma","enter"],emailSeperator:",",defaultEmails:null,validEmailTest:null},d=a.extend({},c,b),e=0;e<d.tagKeys.length;e++)"space"==d.tagKeys[e]?d.tagKeys[e]=32:"comma"==d.tagKeys[e]?d.tagKeys[e]=188:"enter"==d.tagKeys[e]?d.tagKeys[e]=13:"semicolon"==d.tagKeys[e]?d.tagKeys[e]=59:d.tagKeys[e]===parseInt(d.tagKeys[e],10)&&(d.tagKeys[e]=d.tagKeys[e]);return d.emailSeperator=d.emailSeperator.trim(),console.log(d),this.each(function(){function b(b){if(b=b.trim(),"found"!=g(b)){if("invalid"==e(b))return a(l).addClass("tagInput-invalid-email"),!1;var f=a("<a>").addClass("tagInput-tag-remove").attr("title","Remove").append(a("<span>").addClass("glyphicon glyphicon-remove")),j=a("<div>").addClass("tagInput-tag").append(a("<span>").text(b)).append(f);return i.push(b),a(h).val(i.join(d.emailSeperator+" ")),a(k).before(j),c(),!0}}function c(){if(a(k).parent().find(".tagInput-tag:last").length>0){var b=a(j).offset().left+a(j).width(),c=a(k).parent().find(".tagInput-tag:last").offset().left+a(k).parent().find(".tagInput-tag:last").width(),d=b-c-30;d<200?(a(k).width(),a(k).addClass("fullWidth")):(a(k).removeClass("fullWidth"),a(k).width(b-c-50))}else a(k).width(),a(k).addClass("fullWidth")}function e(a){return null!=d.validEmailTest?d.validEmailTest(a):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a)?"valid":"invalid"}function f(){if(""!=a(h).val()){var e=a(h).val();e=e.split(d.emailSeperator);for(var f=0;f<e.length;f++)b(e[f].trim())}if(null!=d.defaultEmails)for(var f=0;f<d.defaultEmails.length;f++)b(d.defaultEmails[f].trim());c()}function g(a){return i.indexOf(a)>=0?"found":"not_found"}var h=this,i=[],j=(a(h).height(),a("<div>").addClass("tagInput-container")),k=a("<div>").addClass("tagInput-input-container"),l=a("<input>").addClass("tagInput-input");return a(k).append(l),a(j).append(k),a(h).after(j),a(l).on("keydown",function(e){a(this).removeClass("tagInput-invalid-email");var f;if(window.event?f=e.keyCode:e.which&&(f=e.which),d.tagKeys.indexOf(f)!=-1){var g=0;1==b(a(this).val())&&(a(this).val(""),g=1,a(this).on("keyup",function(b){1==g&&(a(this).val(""),g=0)}))}else 8==f&&0==a(this).val().length&&a(k).parent().find(".tagInput-tag:last").length>0&&(i.splice(i.indexOf(a(j).find(".tagInput-tag:last").text()),1),a(h).val(i.join(d.emailSeperator+" ")),a(j).find(".tagInput-tag:last").remove(),c())}),function(){a(j).on("click",".tagInput-tag-remove",function(b){b.preventDefault(),a(this).parent().remove(),i.splice(i.indexOf(a(this).parent().find("span").text()),1),a(h).val(i.join(d.emailSeperator+" "))})}(),f(),a(this)})}}(jQuery);