!function(a){a.fn.tagInput=function(b){var c={checkDupEmail:!0,position:"top"};a.extend({},c,b);return this.each(function(){function b(b){if(b=b.trim(),"invalid"==d(b))return a(h).addClass("tagInput-invalid-email"),!1;var f=a("<a>").addClass("tagInput-tag-remove").attr("title","Remove").append(a("<span>").addClass("glyphicon glyphicon-remove")),j=a("<div>").addClass("tagInput-tag").append(a("<span>").text(b)).append(f);return i.push(b),a(e).val(i.join(", ")),a(g).before(j),c(),!0}function c(){if(a(g).parent().find(".tagInput-tag:last").length>0){var b=a(f).offset().left+a(f).width(),c=a(g).parent().find(".tagInput-tag:last").offset().left+a(g).parent().find(".tagInput-tag:last").width(),d=b-c-30;d<200?(a(g).width(),a(g).addClass("fullWidth")):(a(g).removeClass("fullWidth"),a(g).width(b-c-50))}else a(g).width(),a(g).addClass("fullWidth")}function d(a){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a)?"valid":"invalid"}var e=this,f=(a(e).height(),a("<div>").addClass("tagInput-container")),g=a("<div>").addClass("tagInput-input-container"),h=a("<input>").addClass("tagInput-input"),i=[];return a(g).append(h),a(f).append(g),a(e).after(f),a(h).on("keydown",function(d){a(this).removeClass("tagInput-invalid-email");var h;window.event?h=d.keyCode:d.which&&(h=d.which),32==h||13==h||188==h?1==b(a(this).val())&&a(this).val(""):8==h&&0==a(this).val().length&&a(g).parent().find(".tagInput-tag:last").length>0&&(i.splice(i.indexOf(a(f).find(".tagInput-tag:last").text()),1),a(e).val(i.join(", ")),a(f).find(".tagInput-tag:last").remove(),c())}),c(),a(f).find(".tagInput-tag-remove").on("click",function(b){b.preventDefault(),a(this).parent().remove(),i.splice(i.indexOf(a(this).parent().find("span").text()),1),a(e).val(i.join(", "))}),a(this).hide()})}}(jQuery);